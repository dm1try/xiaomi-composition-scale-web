<html>
  <body>
    <div id="info"></div>
    <button title="start" onClick="onButtonTest()">test</button>
    <script>
      function onButtonTest(){
        // data received here https://googlechrome.github.io/samples/web-bluetooth/notifications.html
        notifications =[
          new Uint8Array([0x02, 0x04, 0xb2, 0x07, 0x01, 0x01, 0x05, 0x01, 0x20, 0x00, 0x00, 0xf8, 0x39]),
          new Uint8Array([0x02, 0x04, 0xb2, 0x07, 0x01, 0x01, 0x05, 0x01, 0x20, 0x00, 0x00, 0xf8, 0x39]),
          new Uint8Array([0x02, 0x04, 0xb2, 0x07, 0x01, 0x01, 0x05, 0x01, 0x20, 0x00, 0x00, 0xf8, 0x39]),
          new Uint8Array([0x02, 0x04, 0xb2, 0x07, 0x01, 0x01, 0x05, 0x01, 0x20, 0x00, 0x00, 0xf8, 0x39]),
          new Uint8Array([0x02, 0x04, 0xb2, 0x07, 0x01, 0x01, 0x05, 0x01, 0x21, 0x00, 0x00, 0xf8, 0x39]),
          new Uint8Array([0x02, 0x24, 0xb2, 0x07, 0x01, 0x01, 0x05, 0x01, 0x22, 0xfe, 0xff, 0xf8, 0x39]),
          new Uint8Array([0x02, 0x26, 0xb2, 0x07, 0x01, 0x01, 0x05, 0x01, 0x22, 0xd0, 0x01, 0xf8, 0x39]),
          new Uint8Array([0x02, 0xa6, 0xb2, 0x07, 0x01, 0x01, 0x05, 0x01, 0x22, 0xd0, 0x01, 0xf8, 0x39])
        ]

        notifications.forEach(function(notification){
          data_view = new DataView(notification.buffer)
          handleNotifications({target: {value: data_view}})
        })
      }

      function handleNotifications(event) {
        let value = event.target.value;
        let weight_data = value.getUint16(11, true)
        let weight = weight_data * 0.005

        let info = document.getElementById("info")
        info.innerHTML = weight.toFixed(3) + " kg";
      }
    </script>
  </body>
</html>
